# Compatible with SageMaker Distribution 3.4.2 AND local development
# Tested on: Mac (local), SageMaker Distribution 3.4.2

# ============================================================
# Core ML Libraries - SageMaker 3.4.2 Compatible Versions
# ============================================================
torch==2.2.0
torchvision==0.17.0
torchaudio==2.2.0
transformers==4.40.0
datasets==2.16.0
accelerate==0.27.0  # Required for transformers Trainer
scikit-learn==1.4.0
numpy==1.26.4
pandas==2.1.4

# ============================================================
# MLOps & Orchestration
# ============================================================
mlflow==2.16.0
optuna==3.6.1

# ============================================================
# API & Backend
# ============================================================
fastapi==0.115.4
uvicorn[standard]==0.35.0
pydantic==2.11.9
python-multipart==0.0.6

# ============================================================
# Database
# ============================================================
sqlalchemy==2.0.35
psycopg2-binary==2.9.10
alembic==1.13.2

# ============================================================
# Monitoring & Observability
# ============================================================
evidently==0.4.16  # Last version compatible with fsspec<2024 (required by datasets 2.16.0)
prometheus-client==0.22.0
grafana-api==1.0.3

# ============================================================
# Data Processing
# ============================================================
pyarrow==15.0.0
fsspec<=2023.10.0,>=2023.1.0

# ============================================================
# Utilities
# ============================================================
python-dotenv==1.0.1
pyyaml==6.0.2
click==8.1.7
tqdm==4.67.0
loguru==0.7.3

# ============================================================
# Testing
# ============================================================
pytest==8.3.3
pytest-asyncio==0.24.0
pytest-cov==5.0.0
pytest-mock==3.14.0
pytest-xdist==3.6.1
httpx==0.27.0
factory-boy==3.3.1

# ============================================================
# Development
# ============================================================
black==24.10.0
isort==5.13.2
flake8==7.1.1
mypy==1.11.2

# ============================================================
# Container & Cloud
# ============================================================
boto3==1.34.162
botocore==1.34.162
docker==7.1.0

# ============================================================
# NOTES
# ============================================================
# Key Version Constraints for SageMaker 3.4.2 Compatibility:
# - torch: 2.2.0 (SageMaker has 2.1-2.2 range)
# - transformers: 4.40.0 (SageMaker has 4.35-4.40 range)
# - datasets: 2.16.0 (SageMaker has 2.14-2.16 range)
# - numpy: 1.26.4 (MUST be < 2.0 for SageMaker)
# - pandas: 2.1.4 (SageMaker has 2.0-2.1 range)
# - pyarrow: 15.0.0 (SageMaker default)
# - boto3: 1.34.162 (matches SageMaker distribution)
#
# These versions work on:
# - Mac/Linux local development
# - SageMaker Distribution 3.4.2
# - Docker containers
# - CI/CD pipelines
